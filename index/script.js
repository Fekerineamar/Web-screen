document.querySelector("body").ondrop=()=>!1;let dt=new Date,thisyear=dt.getUTCFullYear(),spin=document.querySelector(".spinner");document.querySelector("#year").innerText=thisyear,document.querySelector("#file").onchange=e=>{document.querySelector("p").innerText=e.target.files[0].name,e.preventDefault(),(r=new FormData).append("myFile",e.target.files[0]),e.target.files[0]?(spin.style.visibility="visible",e.target.setAttribute("disabled","disabled"),e.target.parentElement.children.p.innerText="Please Wait...",fetch("/",{method:"POST",body:r}).then(e=>e.json()).then(n=>{n.success?t(n):(spin.style.visibility="hidden",e.target.removeAttribute("disabled","disabled"),e.target.parentElement.children.p.innerText=n.error,e.target.parentElement.children.p.style.color="red")})):alert("please choose one file");let t=t=>{e.target.parentElement.children.p.innerText="Please Wait...",e.target.parentElement.children.p.style.color="#fff",e.target.remove(),fetch("/wait",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.blob()).then(e=>{e&&(document.querySelector("p").innerHTML="Done! Refresh You page To Add Again",spin.style.visibility="hidden"),(()=>{let t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="download.zip",document.querySelector(".box").appendChild(n),n.click(),n.remove()})()})}},document.querySelector("body").ondrop=()=>!1;let dt=new Date,thisyear=dt.getUTCFullYear(),spin=document.querySelector(".spinner");document.querySelector("#year").innerText=thisyear,document.querySelector("#file").onchange=e=>{document.querySelector("p").innerText=e.target.files[0].name,e.preventDefault(),(r=new FormData).append("myFile",e.target.files[0]),e.target.files[0]?(spin.style.visibility="visible",e.target.setAttribute("disabled","disabled"),e.target.parentElement.children.p.innerText="Please Wait...",fetch("/",{method:"POST",body:r}).then(e=>e.json()).then(n=>{n.success?t(n):(spin.style.visibility="hidden",e.target.removeAttribute("disabled","disabled"),e.target.parentElement.children.p.innerText=n.error,e.target.parentElement.children.p.style.color="red")})):alert("please choose one file");let t=t=>{e.target.parentElement.children.p.innerText="Please Wait...",e.target.parentElement.children.p.style.color="#fff",e.target.remove(),fetch("/wait",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.blob()).then(e=>{e&&(document.querySelector("p").innerHTML="Done! Refresh You page To Add Again",spin.style.visibility="hidden"),(()=>{let t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="download.zip",document.querySelector(".box").appendChild(n),n.click(),n.remove()})()})}};
